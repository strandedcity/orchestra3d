<html>
<head>
    <script src="arrays.js" type="text/javascript"></script>
    <script type="text/javascript">
        // Import function from Emscripten generated file
        float_multiply_array = Module.cwrap(
          'float_multiply_array', 'number', ['number', 'number', 'number']
        );

        // Create example data to test float_multiply_array
        var data = new Float32Array([1, 2.20, 3, 4, 5]);

        // Get data byte size, allocate memory on Emscripten heap, and get pointer
        var nDataBytes = data.length * data.BYTES_PER_ELEMENT;
        var dataPtr = Module._malloc(nDataBytes);

        // Copy data to Emscripten heap (directly accessed from Module.HEAPU8)
        var dataHeap = new Uint8Array(Module.HEAPU8.buffer, dataPtr, nDataBytes);
        dataHeap.set(new Uint8Array(data.buffer));

        // Call function and get result
        float_multiply_array(2, dataHeap.byteOffset, data.length);
        var result = new Float32Array(dataHeap.buffer, dataHeap.byteOffset, data.length);

        console.log(result);

        // Free memory
        Module._free(dataHeap.byteOffset);
    </script>
</head>
<body>
Loaded!
</body>
</html>